<template>
  <div class="uk-position-relative uk-visible-toggle uk-light" tabindex="-1"
    uk-slideshow="animation: Slide; ratio: 6/9; autoplay: true;" ref="slideshowRef">
    <ul class="uk-slideshow-items">
      <li class="li-slide">
        <div class="sli-item">
          <div class="slide-item dotted">
            <img src="@/assets/image/list-icon/tp01.png" class="lef-icon" alt="">
            <h4>心電監測器-ECG monitor</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp01-2.png" class="lef-icon" alt="">
            <h4>電極片(AgCl Electrodes)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp01-3.png" class="lef-icon" alt="">
            <h4>類比晶片(EX:ADS1292)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp01-4.png" class="lef-icon" alt="">
            <h4>控制晶片(EX:STM32)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp01-5.png" class="lef-icon" alt="">
            <h4>通訊模組(BLE模組)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp01-6.png" class="lef-icon" alt="">
            <h4>電源(Li-Po Battery)</h4>
          </div>
          <div class="slide-item">
            <h5>
              心電監測器-五大材料
            </h5>
          </div>
        </div>
      </li>
      <li class="li-slide">
        <div class="sli-item">
          <div class="slide-item dotted">
            <img src="@/assets/image/list-icon/tp02.png" class="lef-icon" alt="">
            <h4>數位乳房攝影儀-DM</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp02-2.png" class="lef-icon" alt="">
            <h4>探測面板(a-Se Flat Panel)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp02-3.png" class="lef-icon" alt="">
            <h4>X光源模組(X-ray)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp02-4.png" class="lef-icon" alt="">
            <h4>高壓電源模組(HVG)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp02-5.png" class="lef-icon" alt="">
            <h4>壓迫板模組(CP)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp02-6.png" class="lef-icon" alt="">
            <h4>控制與影響處理版(IP/FPGAB)</h4>
          </div>
          <div class="slide-item">
            <h5>
              數位乳房攝影儀-五大材料
            </h5>
          </div>
        </div>
      </li>

      <li class="li-slide">
        <div class="sli-item">
          <div class="slide-item dotted">
            <img src="@/assets/image/list-icon/tp03.png" class="lef-icon" alt="">
            <h4>肺部劑量斷層掃描儀-LDCT</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp03-2.png" class="lef-icon" alt="">
            <h4>X光探測器陣列(SDA)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp03-3.png" class="lef-icon" alt="">
            <h4>旋轉機構模組(CT GMA)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp03-4.png" class="lef-icon" alt="">
            <h4>多層探測晶片(M-S DC)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp03-5.png" class="lef-icon" alt="">
            <h4>高速資料轉換器(H-S ADC)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp03-6.png" class="lef-icon" alt="">
            <h4>鉛防護結構件(LPSP)</h4>
          </div>
          <div class="slide-item">
            <h5>
              肺部劑量斷層掃描儀-五大材料
            </h5>
          </div>
        </div>
      </li>
      <li class="li-slide">
        <div class="sli-item">
          <div class="slide-item dotted">
            <img src="@/assets/image/list-icon/tp04.png" class="lef-icon" alt="">
            <h4>血糖智慧監測裝置-CGM</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp04-2.png" class="lef-icon" alt="">
            <h4>微針感測貼片(MSP)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp04-3.png" class="lef-icon" alt="">
            <h4>酶感測元件(GOES)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp04-4.png" class="lef-icon" alt="">
            <h4>傳輸晶片(NFC)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp04-5.png" class="lef-icon" alt="">
            <h4>控制晶片(MCU)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp04-6.png" class="lef-icon" alt="">
            <h4>醫療膠材(M-G AL)</h4>
          </div>
          <div class="slide-item">
            <h5>
              血糖智慧監測裝置-五大材料
            </h5>
          </div>
        </div>
      </li>
      <li class="li-slide">
        <div class="sli-item">
          <div class="slide-item dotted">
            <img src="@/assets/image/list-icon/tp05.png" class="lef-icon" alt="">
            <h4>視網膜AI篩檢照相機-AI RIS</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp05-2.png" class="lef-icon" alt="">
            <h4>
              近紅外攝影模組(NRCM)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp05-3.png" class="lef-icon" alt="">
            <h4>自動對焦鏡頭模組(AOwM)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp05-4.png" class="lef-icon" alt="">
            <h4>AI運算模組(Edge AI)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp05-5.png" class="lef-icon" alt="">
            <h4>螢幕顯示模組(T LCD P)</h4>
          </div>
          <div class="slide-item solid">
            <img src="@/assets/image/list-icon/tp05-6.png" class="lef-icon" alt="">
            <h4>數據上傳模組(LTE)</h4>
          </div>
          <div class="slide-item">
            <h5>
              視網膜AI篩檢照相機-五大材料
            </h5>
          </div>
        </div>
      </li>
    </ul>
    <!-- <a v-if="slidenav" class="uk-position-center-left uk-position-small uk-hidden-hover" uk-slidenav-previous
      uk-slideshow-item="previous"></a>
    <a v-if="slidenav" class="uk-position-center-right uk-position-small uk-hidden-hover" uk-slidenav-next
      uk-slideshow-item="next"></a>
    <ul class="uk-slideshow-nav uk-dotnav uk-flex-center uk-margin"></ul> -->
  </div>
</template>

<script lang="ts" setup>
import { ref, onMounted, nextTick } from 'vue'

const props = defineProps({
  options: {
    type: Object,
    default: {}
  },
  stup: {
    type: Number,
    default: 0 // 預設比例16:9
  },
  slidenav: {
    type: Boolean,
    default: false
  },
  slides: {
    type: Array,
    default: () => []
  }
})
const stupHonji = ref(props.stup)
console.log(stupHonji.value);

const slideshowRef = ref<HTMLElement | null>(null)

onMounted(async () => {
  if (process.client) {
    const link = document.createElement('link')
    link.rel = 'stylesheet'
    link.href = 'uikit/uikit-icons.min.js'
    document.head.appendChild(link)
  }
  await nextTick()
  initSlideshow()
})

const initSlideshow = () => {
  if (!process.client) return

  const UIkit = window.UIkit
  console.log(UIkit);

  if (!UIkit || !slideshowRef.value) {
    console.error('UIkit not loaded:', !UIkit)
    console.error('DOM not ready:', !slideshowRef.value)
    return
  }

  // 初始化
  UIkit.slideshow(slideshowRef.value, {
    pauseOnHover: false,
    ...props.options
  })
}
// 監聽 ratio 變化
watch(() => props.stup, (newVal, oldVal) => {
  console.log('props.stup', newVal, oldVal);
  if (newVal > oldVal) {
    onNext()
  } else {
    onPrev()
  }
})
const onPrev = () => {
  if (!slideshowRef.value) return
  UIkit.slideshow(slideshowRef.value).show('previous')
}
const onNext = () => {
  if (!slideshowRef.value) return
  UIkit.slideshow(slideshowRef.value).show('next')
}

</script>
<style scoped lang="sass">
.uk-slideshow
  width: 100%
:deep(.uk-slideshow-items),.uk-slideshow-items
  width: 100%
  margin-top: 20px
  position: relative
  // height: 100%
  .li-slide
    padding: 0 10px
    .sli-item
      color: #151515
      width: 100%
      position: relative !important
      z-index: 1 !important
      border: 2px solid #e1e1e1
      background: #fff
      font-weight: 500
      letter-spacing: .05em
      text-transform: uppercase
      border-bottom: 3px solid #69a6d1
      box-sizing: border-box
      .solid
        border-bottom: 1px solid rgb(189, 188, 188)
      .dotted
        border-bottom: 2px dotted rgb(189, 188, 188)
      .slide-item
        padding: 10px 55px 10px 18px
        display: flex
        align-items: center
        gap: 10px
        color: #151515
        .lef-icon
          display: flex
          align-items: center
          justify-content: center
          min-width: 40px
          width: 40px
          height: 40px
          margin: 8px
        h5
          width: 100%
          font-size: 12px
          text-align: center
          color: #9b9b9b
        h4
          font-size: 16px
          color: #151515

</style>
